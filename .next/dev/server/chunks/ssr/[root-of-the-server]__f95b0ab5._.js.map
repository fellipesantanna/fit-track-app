{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/llipe/OneDrive/%C3%81rea%20de%20Trabalho/projeto-fit-track/v0-personal-training-app/lib/api/session.ts"],"sourcesContent":["StatCard.tsx\r\n\r\n"],"names":[],"mappings":"AAAA,SAAS,GAAG"}},
    {"offset": {"line": 26, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/llipe/OneDrive/%C3%81rea%20de%20Trabalho/projeto-fit-track/v0-personal-training-app/components/ui/separator.tsx"],"sourcesContent":["'use client'\r\n\r\nimport * as React from 'react'\r\nimport * as SeparatorPrimitive from '@radix-ui/react-separator'\r\n\r\nimport { cn } from '@/lib/utils'\r\n\r\nfunction Separator({\r\n  className,\r\n  orientation = 'horizontal',\r\n  decorative = true,\r\n  ...props\r\n}: React.ComponentProps<typeof SeparatorPrimitive.Root>) {\r\n  return (\r\n    <SeparatorPrimitive.Root\r\n      data-slot=\"separator\"\r\n      decorative={decorative}\r\n      orientation={orientation}\r\n      className={cn(\r\n        'bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px',\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Separator }\r\n"],"names":[],"mappings":";;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,UAAU,EACjB,SAAS,EACT,cAAc,YAAY,EAC1B,aAAa,IAAI,EACjB,GAAG,OACkD;IACrD,qBACE,8OAAC,6KAAuB;QACtB,aAAU;QACV,YAAY;QACZ,aAAa;QACb,WAAW,IAAA,kHAAE,EACX,kKACA;QAED,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 55, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/llipe/OneDrive/%C3%81rea%20de%20Trabalho/projeto-fit-track/v0-personal-training-app/app/historico/page.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useEffect, useState } from \"react\"\r\nimport { sessionsApi } from \"@/lib/api/session\"\r\nimport { Session } from \"@/lib/types\"\r\nimport { motion } from \"framer-motion\"\r\nimport { ArrowRight, CalendarDays, Clock, Dumbbell } from \"lucide-react\"\r\nimport { useRouter } from \"next/navigation\"\r\nimport { Separator } from \"@/components/ui/separator\"\r\n\r\n/** ===========================================================\r\n * Retorna a segunda-feira da semana correspondente\r\n ============================================================ */\r\nfunction startOfWeek(date: Date) {\r\n  const d = new Date(date)\r\n  const day = d.getDay() // 0 = domingo\r\n  const diff = (day === 0 ? -6 : 1) - day // trazer para segunda\r\n  d.setDate(d.getDate() + diff)\r\n  d.setHours(0, 0, 0, 0)\r\n  return d\r\n}\r\n\r\n/** ===========================================================\r\n * Formatar data dd/mm\r\n ============================================================ */\r\nfunction formatShort(d: Date) {\r\n  return d.toLocaleDateString(\"pt-BR\", {\r\n    day: \"2-digit\",\r\n    month: \"2-digit\"\r\n  })\r\n}\r\n\r\n/** ===========================================================\r\n * Formatar Título da Semana\r\n ============================================================ */\r\nfunction formatWeekTitle(monday: Date) {\r\n  const end = new Date(monday)\r\n  end.setDate(end.getDate() + 6)\r\n\r\n  return `${monday.toLocaleDateString(\"pt-BR\", {\r\n    day: \"2-digit\",\r\n    month: \"long\"\r\n  })} — ${end.toLocaleDateString(\"pt-BR\", {\r\n    day: \"2-digit\",\r\n    month: \"long\"\r\n  })}`\r\n}\r\n\r\nexport default function HistoricoPage() {\r\n  const [list, setList] = useState<Session[]>([])\r\n  const [loading, setLoading] = useState(true)\r\n  const router = useRouter()\r\n\r\n  /** ===========================================================\r\n   * Carregar sessões detalhadas\r\n   ============================================================ */\r\n  async function load() {\r\n    setLoading(true)\r\n    try {\r\n      const base = await sessionsApi.getAll()\r\n      const detailed: Session[] = []\r\n\r\n      for (const s of base) {\r\n        detailed.push(await sessionsApi.getById(s.id))\r\n      }\r\n\r\n      setList(detailed)\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    load()\r\n  }, [])\r\n\r\n\r\n  /** ===========================================================\r\n   * AGRUPAR POR SEMANA -> { mondayDateString: Session[] }\r\n   ============================================================ */\r\n  const grouped: Record<string, Session[]> = {}\r\n\r\n  for (const s of list) {\r\n    const monday = startOfWeek(s.startedAt)\r\n    const key = monday.toISOString().slice(0, 10)\r\n\r\n    if (!grouped[key]) grouped[key] = []\r\n    grouped[key].push(s)\r\n  }\r\n\r\n  // ordenar semanas da mais recente para mais antiga\r\n  const sortedWeeks = Object.keys(grouped).sort((a, b) =>\r\n    a < b ? 1 : -1\r\n  )\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex justify-center items-center min-h-[70vh]\">\r\n        <div className=\"animate-spin w-10 h-10 border-4 border-purple-500 border-t-transparent rounded-full\"></div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <motion.div\r\n      initial={{ opacity: 0, y: 15 }}\r\n      animate={{ opacity: 1, y: 0 }}\r\n      transition={{ duration: 0.25 }}\r\n      className=\"max-w-3xl mx-auto p-6 flex flex-col gap-10\"\r\n    >\r\n      <div>\r\n        <h1 className=\"text-3xl font-bold mb-1\">Histórico</h1>\r\n        <p className=\"text-muted-foreground\">\r\n          Veja seus treinos organizados por semana\r\n        </p>\r\n      </div>\r\n\r\n      <Separator />\r\n\r\n      {/* ===========================================================\r\n          LISTA POR SEMANA\r\n      ============================================================ */}\r\n      {sortedWeeks.map((weekKey) => {\r\n        const monday = new Date(weekKey)\r\n        const title = formatWeekTitle(monday)\r\n        const sessions = grouped[weekKey]\r\n\r\n        return (\r\n          <motion.div\r\n            key={weekKey}\r\n            initial={{ opacity: 0, y: 12 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            transition={{ duration: 0.3 }}\r\n            className=\"flex flex-col gap-4\"\r\n          >\r\n            <h2 className=\"text-xl font-bold\">{title}</h2>\r\n\r\n            {/* SESSÕES DA SEMANA */}\r\n            <div className=\"flex flex-col gap-4\">\r\n              {sessions.map((s) => {\r\n                const totalTimeMin = Math.round(\r\n                  (s.finishedAt.getTime() - s.startedAt.getTime()) / 60000\r\n                )\r\n\r\n                return (\r\n                  <motion.div\r\n                    key={s.id}\r\n                    whileHover={{ scale: 1.02 }}\r\n                    transition={{ duration: 0.15 }}\r\n                    onClick={() => router.push(`/historico/${s.id}`)}\r\n                    className=\"\r\n                      cursor-pointer rounded-xl border bg-card shadow-sm \r\n                      p-4 flex items-center justify-between\r\n                      hover:bg-muted/40 transition\r\n                    \"\r\n                  >\r\n                    <div className=\"flex items-center gap-4\">\r\n\r\n                      <div className=\"h-12 w-12 flex items-center justify-center rounded-lg bg-purple-100 dark:bg-purple-900/40\">\r\n                        <Dumbbell className=\"w-6 h-6 text-purple-700 dark:text-purple-300\" />\r\n                      </div>\r\n\r\n                      <div className=\"flex flex-col\">\r\n                        <span className=\"font-semibold text-lg\">\r\n                          {s.routineName}\r\n                        </span>\r\n\r\n                        <span className=\"text-muted-foreground text-sm\">\r\n                          {formatShort(s.startedAt)} • {s.exercises.length} exercícios\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"flex items-center gap-4\">\r\n                      <div className=\"flex items-center gap-1 text-sm text-muted-foreground\">\r\n                        <Clock className=\"w-4 h-4\" />\r\n                        {totalTimeMin} min\r\n                      </div>\r\n\r\n                      <ArrowRight className=\"w-5 h-5 text-muted-foreground\" />\r\n                    </div>\r\n                  </motion.div>\r\n                )\r\n              })}\r\n            </div>\r\n\r\n            <Separator />\r\n          </motion.div>\r\n        )\r\n      })}\r\n\r\n    </motion.div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}}]
}