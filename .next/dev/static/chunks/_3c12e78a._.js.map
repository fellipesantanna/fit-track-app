{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/llipe/OneDrive/%C3%81rea%20de%20Trabalho/projeto-fit-track/v0-personal-training-app/lib/supabase.ts"],"sourcesContent":["\"use client\";\r\n\r\nimport { createBrowserClient } from \"@supabase/ssr\";\r\n\r\nexport function createSupabaseBrowserClient() {\r\n  return createBrowserClient(\r\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\r\n  );\r\n}\r\n\r\nexport const supabase = createSupabaseBrowserClient();\r\n"],"names":[],"mappings":";;;;;;AAMI;AAJJ;AAAA;AAFA;;AAIO,SAAS;IACd,OAAO,IAAA,oMAAmB;AAI5B;AAEO,MAAM,WAAW"}},
    {"offset": {"line": 26, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/llipe/OneDrive/%C3%81rea%20de%20Trabalho/projeto-fit-track/v0-personal-training-app/lib/mappers/routine.ts"],"sourcesContent":["import { Routine, RoutineExercise } from \"@/lib/types\";\r\n\r\nexport function mapDbRoutine(db: any) {\r\n  return {\r\n    id: db.id,\r\n    name: db.name,\r\n    createdAt: db.created_at,\r\n    userId: db.user_id,\r\n\r\n    exercises: (db.routine_exercises ?? []).map((ex: any) => ({\r\n      id: ex.id,\r\n      exerciseId: ex.exercise_id,\r\n      position: ex.position,\r\n      suggestedSets: ex.suggested_sets ?? null,\r\n      suggestedReps: ex.suggested_reps ?? null,\r\n      advancedTechnique: ex.advanced_technique ?? \"\"\r\n    }))\r\n  }\r\n}\r\n\r\nfunction mapDbRoutineExercise(row: any): RoutineExercise {\r\n  return {\r\n    id: row.id,\r\n    exerciseId: row.exercise_id,\r\n    position: row.position ?? 0,\r\n    suggestedSets: row.suggested_sets ?? null,\r\n    suggestedReps: row.suggested_reps ?? null,\r\n    advancedTechnique: row.advanced_technique ?? \"\"\r\n  };\r\n}\r\n\r\nexport function toDbRoutinePayload(routine: any) {\r\n  return {\r\n    name: routine.name,\r\n    user_id: routine.userId,\r\n    exercises: routine.exercises.map((e: any) => ({\r\n      exercise_id: e.exerciseId,\r\n      position: e.position,\r\n      suggested_sets: e.suggestedSets ?? null,\r\n      suggested_reps: e.suggestedReps ?? null,\r\n      advanced_technique: e.advancedTechnique ?? \"\",\r\n    }))\r\n  };\r\n}\r\n"],"names":[],"mappings":";;;;;;AAEO,SAAS,aAAa,EAAO;IAClC,OAAO;QACL,IAAI,GAAG,EAAE;QACT,MAAM,GAAG,IAAI;QACb,WAAW,GAAG,UAAU;QACxB,QAAQ,GAAG,OAAO;QAElB,WAAW,CAAC,GAAG,iBAAiB,IAAI,EAAE,EAAE,GAAG,CAAC,CAAC,KAAY,CAAC;gBACxD,IAAI,GAAG,EAAE;gBACT,YAAY,GAAG,WAAW;gBAC1B,UAAU,GAAG,QAAQ;gBACrB,eAAe,GAAG,cAAc,IAAI;gBACpC,eAAe,GAAG,cAAc,IAAI;gBACpC,mBAAmB,GAAG,kBAAkB,IAAI;YAC9C,CAAC;IACH;AACF;AAEA,SAAS,qBAAqB,GAAQ;IACpC,OAAO;QACL,IAAI,IAAI,EAAE;QACV,YAAY,IAAI,WAAW;QAC3B,UAAU,IAAI,QAAQ,IAAI;QAC1B,eAAe,IAAI,cAAc,IAAI;QACrC,eAAe,IAAI,cAAc,IAAI;QACrC,mBAAmB,IAAI,kBAAkB,IAAI;IAC/C;AACF;AAEO,SAAS,mBAAmB,OAAY;IAC7C,OAAO;QACL,MAAM,QAAQ,IAAI;QAClB,SAAS,QAAQ,MAAM;QACvB,WAAW,QAAQ,SAAS,CAAC,GAAG,CAAC,CAAC,IAAW,CAAC;gBAC5C,aAAa,EAAE,UAAU;gBACzB,UAAU,EAAE,QAAQ;gBACpB,gBAAgB,EAAE,aAAa,IAAI;gBACnC,gBAAgB,EAAE,aAAa,IAAI;gBACnC,oBAAoB,EAAE,iBAAiB,IAAI;YAC7C,CAAC;IACH;AACF"}},
    {"offset": {"line": 78, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/llipe/OneDrive/%C3%81rea%20de%20Trabalho/projeto-fit-track/v0-personal-training-app/lib/api/routines.ts"],"sourcesContent":["import { supabase } from \"@/lib/supabase\";\r\nimport { mapDbRoutine } from \"@/lib/mappers/routine\";\r\n\r\n/* ============================================================\r\n   HELPERS\r\n============================================================ */\r\nfunction toDbRoutinePayload(routine: any, userId: string) {\r\n  return {\r\n    name: routine.name,\r\n    user_id: userId,\r\n    exercises: routine.exercises.map((e: any) => ({\r\n      exercise_id: e.exerciseId,\r\n      position: e.position,\r\n      suggested_sets: e.suggestedSets ?? null,\r\n      suggested_reps: e.suggestedReps ?? null,\r\n      advanced_technique: e.advancedTechnique ?? \"\",\r\n    })),\r\n  };\r\n}\r\n\r\n/* ============================================================\r\n   API\r\n============================================================ */\r\nexport const routinesApi = {\r\n  /* ---------- GET ALL ---------- */\r\n  async getAll() {\r\n    const { data, error } = await supabase\r\n      .from(\"routines\")\r\n      .select(`\r\n        id,\r\n        name,\r\n        created_at,\r\n        user_id,\r\n        routine_exercises (\r\n          id,\r\n          exercise_id,\r\n          position,\r\n          suggested_sets,\r\n          suggested_reps,\r\n          advanced_technique\r\n        )\r\n      `)\r\n      .order(\"created_at\", { ascending: false });\r\n\r\n    if (error) throw error;\r\n    return data.map(mapDbRoutine);\r\n  },\r\n\r\n  /* ---------- GET BY ID ---------- */\r\n  async getById(id: string) {\r\n    const { data, error } = await supabase\r\n      .from(\"routines\")\r\n      .select(`\r\n        id,\r\n        name,\r\n        created_at,\r\n        user_id,\r\n        routine_exercises (\r\n          id,\r\n          exercise_id,\r\n          position,\r\n          suggested_sets,\r\n          suggested_reps,\r\n          advanced_technique\r\n        )\r\n      `)\r\n      .eq(\"id\", id)\r\n      .single();\r\n\r\n    if (error) throw error;\r\n    return mapDbRoutine(data);\r\n  },\r\n\r\n  /* ---------- CREATE ---------- */\r\n  async create(input: any) {\r\n    // 1) Criar rotina\r\n    const { data: routine, error } = await supabase\r\n      .from(\"routines\")\r\n      .insert({\r\n        name: input.name,\r\n        user_id: input.userId,\r\n      })\r\n      .select(\"*\")\r\n      .single();\r\n\r\n    if (error) throw error;\r\n\r\n    // 2) Criar exercícios da rotina\r\n    if (input.exercises.length > 0) {\r\n      const exercisePayload = input.exercises.map((e: any) => ({\r\n        routine_id: routine.id,\r\n        exercise_id: e.exerciseId,\r\n        position: e.position,\r\n        suggested_sets: e.suggestedSets ?? null,\r\n        suggested_reps: e.suggestedReps ?? null,\r\n        advanced_technique: e.advancedTechnique ?? \"\",\r\n      }));\r\n\r\n      const { error: exError } = await supabase\r\n        .from(\"routine_exercises\")\r\n        .insert(exercisePayload);\r\n\r\n      if (exError) throw exError;\r\n    }\r\n\r\n    return routinesApi.getById(routine.id);\r\n  },\r\n\r\n  /* ---------- UPDATE (FINAL) ---------- */\r\n  async update(id: string, input: any) {\r\n    // Garantir usuário autenticado\r\n    const { data: auth } = await supabase.auth.getUser();\r\n    const userId = auth?.user?.id;\r\n    if (!userId) throw new Error(\"Usuário não autenticado\");\r\n\r\n    const payload = toDbRoutinePayload(input, userId);\r\n\r\n    // 1) Atualizar nome da rotina\r\n    const { error: updateError } = await supabase\r\n      .from(\"routines\")\r\n      .update({\r\n        name: payload.name,\r\n        user_id: userId,\r\n      })\r\n      .eq(\"id\", id);\r\n\r\n    if (updateError) throw updateError;\r\n\r\n    // 2) Apagar exercícios antigos\r\n    await supabase.from(\"routine_exercises\").delete().eq(\"routine_id\", id);\r\n\r\n    // 3) Recriar exercícios atualizados\r\n    const newItems = payload.exercises.map((e: any) => ({\r\n      routine_id: id,\r\n      exercise_id: e.exercise_id ?? e.exerciseId,\r\n      position: e.position,\r\n      suggested_sets: e.suggested_sets ?? e.suggestedSets ?? null,\r\n      suggested_reps: e.suggested_reps ?? e.suggestedReps ?? null,\r\n      advanced_technique: e.advanced_technique ?? e.advancedTechnique ?? \"\",\r\n    }));\r\n\r\n    const { error: insertError } = await supabase\r\n      .from(\"routine_exercises\")\r\n      .insert(newItems);\r\n\r\n    if (insertError) throw insertError;\r\n\r\n    // 4) Retornar rotina final\r\n    return await routinesApi.getById(id);\r\n  },\r\n\r\n  /* ---------- DELETE ---------- */\r\n  async delete(id: string) {\r\n    const { error } = await supabase.from(\"routines\").delete().eq(\"id\", id);\r\n    if (error) throw error;\r\n    return true;\r\n  },\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 203, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/llipe/OneDrive/%C3%81rea%20de%20Trabalho/projeto-fit-track/v0-personal-training-app/lib/mappers/session.ts"],"sourcesContent":["// lib/mappers/session.ts\r\nimport { Session } from \"../types\"\r\n\r\nexport function mapDbSession(db: any): Session {\r\n  return {\r\n    id: db.id,\r\n    routineId: db.routine_id,\r\n    routineName: db.routine_name ?? \"\",\r\n    startedAt: db.started_at ? new Date(db.started_at) : new Date(),\r\n    finishedAt: db.finished_at ? new Date(db.finished_at) : new Date(),\r\n\r\n    exercises: (db.session_exercises ?? []).map((ex: any) => ({\r\n      id: ex.id,\r\n      exerciseId: ex.exercise_id,\r\n      exerciseName: ex.exercise_name ?? \"Exercício\",\r\n      category: ex.category ?? \"weight-reps\",\r\n      position: ex.position ?? 0,\r\n\r\n      sets: (ex.sets ?? []).map((s: any) => ({\r\n        id: s.id,\r\n        setIndex: s.set_index,\r\n        reps: s.reps ?? null,\r\n        weightKg: s.weight_kg ?? null,\r\n        durationSec: s.duration_sec ?? null,\r\n        distanceM: s.distance_m ?? null,\r\n      }))\r\n    }))\r\n  }\r\n}\r\n"],"names":[],"mappings":"AAAA,yBAAyB;;;;;AAGlB,SAAS,aAAa,EAAO;IAClC,OAAO;QACL,IAAI,GAAG,EAAE;QACT,WAAW,GAAG,UAAU;QACxB,aAAa,GAAG,YAAY,IAAI;QAChC,WAAW,GAAG,UAAU,GAAG,IAAI,KAAK,GAAG,UAAU,IAAI,IAAI;QACzD,YAAY,GAAG,WAAW,GAAG,IAAI,KAAK,GAAG,WAAW,IAAI,IAAI;QAE5D,WAAW,CAAC,GAAG,iBAAiB,IAAI,EAAE,EAAE,GAAG,CAAC,CAAC,KAAY,CAAC;gBACxD,IAAI,GAAG,EAAE;gBACT,YAAY,GAAG,WAAW;gBAC1B,cAAc,GAAG,aAAa,IAAI;gBAClC,UAAU,GAAG,QAAQ,IAAI;gBACzB,UAAU,GAAG,QAAQ,IAAI;gBAEzB,MAAM,CAAC,GAAG,IAAI,IAAI,EAAE,EAAE,GAAG,CAAC,CAAC,IAAW,CAAC;wBACrC,IAAI,EAAE,EAAE;wBACR,UAAU,EAAE,SAAS;wBACrB,MAAM,EAAE,IAAI,IAAI;wBAChB,UAAU,EAAE,SAAS,IAAI;wBACzB,aAAa,EAAE,YAAY,IAAI;wBAC/B,WAAW,EAAE,UAAU,IAAI;oBAC7B,CAAC;YACH,CAAC;IACH;AACF"}},
    {"offset": {"line": 239, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/llipe/OneDrive/%C3%81rea%20de%20Trabalho/projeto-fit-track/v0-personal-training-app/lib/api/session.ts"],"sourcesContent":["import { supabase } from \"@/lib/supabase\"\r\nimport { mapDbSession } from \"@/lib/mappers/session\"\r\nimport { CreateSessionDto } from \"@/lib/types\"\r\n\r\nexport const sessionsApi = {\r\n  async getAll() {\r\n    const { data, error } = await supabase\r\n      .from(\"sessions\")\r\n      .select(`\r\n        id,\r\n        routine_id,\r\n        routine_name,\r\n        started_at,\r\n        finished_at,\r\n        session_exercises (\r\n          id,\r\n          exercise_id,\r\n          exercise_name,\r\n          category,\r\n          sets (\r\n            id,\r\n            set_index,\r\n            reps,\r\n            weight_kg,\r\n            duration_sec,\r\n            distance_m\r\n          )\r\n        )\r\n      `)\r\n      .order(\"started_at\", { ascending: false })\r\n\r\n    if (error) throw error\r\n    return data.map(mapDbSession)\r\n  },\r\n\r\n  async getById(id: string) {\r\n    const { data, error } = await supabase\r\n      .from(\"sessions\")\r\n      .select(`\r\n        id,\r\n        routine_id,\r\n        routine_name,\r\n        started_at,\r\n        finished_at,\r\n        session_exercises (\r\n          id,\r\n          exercise_id,\r\n          exercise_name,\r\n          category,\r\n          sets (\r\n            id,\r\n            set_index,\r\n            reps,\r\n            weight_kg,\r\n            duration_sec,\r\n            distance_m\r\n          )\r\n        )\r\n      `)\r\n      .eq(\"id\", id)\r\n      .single()\r\n\r\n    if (error) throw error\r\n    return mapDbSession(data)\r\n  },\r\n\r\n  async create(input: CreateSessionDto) {\r\n    const { data: userData } = await supabase.auth.getUser()\r\n    const userId = userData?.user?.id\r\n    if (!userId) throw new Error(\"Usuário não autenticado\")\r\n\r\n    // 1) Criar sessão\r\n    const { data: session, error: err1 } = await supabase\r\n      .from(\"sessions\")\r\n      .insert({\r\n        user_id: userId,\r\n        routine_id: input.routineId,\r\n        started_at: input.startedAt,\r\n        finished_at: input.finishedAt,\r\n      })\r\n      .select(\"*\")\r\n      .single()\r\n\r\n    if (err1) throw err1\r\n\r\n    // 2) Criar exercícios da sessão\r\n    for (const ex of input.exercises) {\r\n      const { data: dbEx, error: err2 } = await supabase\r\n        .from(\"session_exercises\")\r\n        .insert({\r\n          session_id: session.id,\r\n          exercise_id: ex.exerciseId,\r\n          category: ex.category,\r\n        })\r\n        .select(\"*\")\r\n        .single()\r\n\r\n      if (err2) throw err2\r\n\r\n      // 3) Criar sets\r\n      if (ex.sets.length > 0) {\r\n        const setsPayload = ex.sets.map((s, i) => ({\r\n          session_exercise_id: dbEx.id,\r\n          set_index: i,\r\n          reps: s.reps ?? null,\r\n          weight_kg: s.weightKg ?? null,\r\n          duration_sec: s.durationSec ?? null,\r\n          distance_m: s.distanceM ?? null,\r\n        }))\r\n\r\n        const { error: err3 } = await supabase\r\n          .from(\"sets\")\r\n          .insert(setsPayload)\r\n\r\n        if (err3) throw err3\r\n      }\r\n    }\r\n\r\n    return this.getById(session.id)\r\n  },\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAGO,MAAM,cAAc;IACzB,MAAM;QACJ,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,8HAAQ,CACnC,IAAI,CAAC,YACL,MAAM,CAAC,CAAC;;;;;;;;;;;;;;;;;;;;MAoBT,CAAC,EACA,KAAK,CAAC,cAAc;YAAE,WAAW;QAAM;QAE1C,IAAI,OAAO,MAAM;QACjB,OAAO,KAAK,GAAG,CAAC,4IAAY;IAC9B;IAEA,MAAM,SAAQ,EAAU;QACtB,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,8HAAQ,CACnC,IAAI,CAAC,YACL,MAAM,CAAC,CAAC;;;;;;;;;;;;;;;;;;;;MAoBT,CAAC,EACA,EAAE,CAAC,MAAM,IACT,MAAM;QAET,IAAI,OAAO,MAAM;QACjB,OAAO,IAAA,4IAAY,EAAC;IACtB;IAEA,MAAM,QAAO,KAAuB;QAClC,MAAM,EAAE,MAAM,QAAQ,EAAE,GAAG,MAAM,8HAAQ,CAAC,IAAI,CAAC,OAAO;QACtD,MAAM,SAAS,UAAU,MAAM;QAC/B,IAAI,CAAC,QAAQ,MAAM,IAAI,MAAM;QAE7B,kBAAkB;QAClB,MAAM,EAAE,MAAM,OAAO,EAAE,OAAO,IAAI,EAAE,GAAG,MAAM,8HAAQ,CAClD,IAAI,CAAC,YACL,MAAM,CAAC;YACN,SAAS;YACT,YAAY,MAAM,SAAS;YAC3B,YAAY,MAAM,SAAS;YAC3B,aAAa,MAAM,UAAU;QAC/B,GACC,MAAM,CAAC,KACP,MAAM;QAET,IAAI,MAAM,MAAM;QAEhB,gCAAgC;QAChC,KAAK,MAAM,MAAM,MAAM,SAAS,CAAE;YAChC,MAAM,EAAE,MAAM,IAAI,EAAE,OAAO,IAAI,EAAE,GAAG,MAAM,8HAAQ,CAC/C,IAAI,CAAC,qBACL,MAAM,CAAC;gBACN,YAAY,QAAQ,EAAE;gBACtB,aAAa,GAAG,UAAU;gBAC1B,UAAU,GAAG,QAAQ;YACvB,GACC,MAAM,CAAC,KACP,MAAM;YAET,IAAI,MAAM,MAAM;YAEhB,gBAAgB;YAChB,IAAI,GAAG,IAAI,CAAC,MAAM,GAAG,GAAG;gBACtB,MAAM,cAAc,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,IAAM,CAAC;wBACzC,qBAAqB,KAAK,EAAE;wBAC5B,WAAW;wBACX,MAAM,EAAE,IAAI,IAAI;wBAChB,WAAW,EAAE,QAAQ,IAAI;wBACzB,cAAc,EAAE,WAAW,IAAI;wBAC/B,YAAY,EAAE,SAAS,IAAI;oBAC7B,CAAC;gBAED,MAAM,EAAE,OAAO,IAAI,EAAE,GAAG,MAAM,8HAAQ,CACnC,IAAI,CAAC,QACL,MAAM,CAAC;gBAEV,IAAI,MAAM,MAAM;YAClB;QACF;QAEA,OAAO,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE;IAChC;AACF"}},
    {"offset": {"line": 344, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/llipe/OneDrive/%C3%81rea%20de%20Trabalho/projeto-fit-track/v0-personal-training-app/components/ui/button.tsx"],"sourcesContent":["import * as React from 'react'\r\nimport { Slot } from '@radix-ui/react-slot'\r\nimport { cva, type VariantProps } from 'class-variance-authority'\r\n\r\nimport { cn } from '@/lib/utils'\r\n\r\nconst buttonVariants = cva(\r\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: 'bg-primary text-primary-foreground hover:bg-primary/90',\r\n        destructive:\r\n          'bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60',\r\n        outline:\r\n          'border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50',\r\n        secondary:\r\n          'bg-secondary text-secondary-foreground hover:bg-secondary/80',\r\n        ghost:\r\n          'hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50',\r\n        link: 'text-primary underline-offset-4 hover:underline',\r\n      },\r\n      size: {\r\n        default: 'h-9 px-4 py-2 has-[>svg]:px-3',\r\n        sm: 'h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5',\r\n        lg: 'h-10 rounded-md px-6 has-[>svg]:px-4',\r\n        icon: 'size-9',\r\n        'icon-sm': 'size-8',\r\n        'icon-lg': 'size-10',\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: 'default',\r\n      size: 'default',\r\n    },\r\n  },\r\n)\r\n\r\nfunction Button({\r\n  className,\r\n  variant,\r\n  size,\r\n  asChild = false,\r\n  ...props\r\n}: React.ComponentProps<'button'> &\r\n  VariantProps<typeof buttonVariants> & {\r\n    asChild?: boolean\r\n  }) {\r\n  const Comp = asChild ? Slot : 'button'\r\n\r\n  return (\r\n    <Comp\r\n      data-slot=\"button\"\r\n      className={cn(buttonVariants({ variant, size, className }))}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Button, buttonVariants }\r\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,IAAA,0KAAG,EACxB,+bACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;YACN,WAAW;YACX,WAAW;QACb;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,OAAO,EACP,IAAI,EACJ,UAAU,KAAK,EACf,GAAG,OAIF;IACD,MAAM,OAAO,UAAU,2KAAI,GAAG;IAE9B,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf;KAnBS"}},
    {"offset": {"line": 409, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/llipe/OneDrive/%C3%81rea%20de%20Trabalho/projeto-fit-track/v0-personal-training-app/app/sessao/page.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useSearchParams, useRouter } from \"next/navigation\"\r\nimport { useEffect, useState } from \"react\"\r\nimport { routinesApi } from \"@/lib/api/routines\"\r\nimport { sessionsApi } from \"@/lib/api/session\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Loader2 } from \"lucide-react\"\r\n\r\nexport default function SessionPage() {\r\n  const search = useSearchParams()\r\n  const router = useRouter()\r\n\r\n  const routineId = search.get(\"routine\")\r\n\r\n  const [loading, setLoading] = useState(true)\r\n  const [routine, setRoutine] = useState<any>(null)\r\n  const [startedAt] = useState(new Date())\r\n\r\n  const [sets, setSets] = useState<any[]>([]) // cada exercício terá sets registrados\r\n\r\n  useEffect(() => {\r\n    async function load() {\r\n      if (!routineId) return\r\n      const r = await routinesApi.getById(routineId)\r\n      setRoutine(r)\r\n\r\n      setSets(\r\n        r.exercises.map((ex: any) => ({\r\n          exerciseId: ex.exerciseId,\r\n          category: ex.category,\r\n          sets: []\r\n        }))\r\n      )\r\n\r\n      setLoading(false)\r\n    }\r\n\r\n    load()\r\n  }, [])\r\n\r\n  async function finalizarTreino() {\r\n    if (!routine) {\r\n      alert(\"Rotina não carregada.\")\r\n      return\r\n    }\r\n\r\n    setSaving(true)\r\n\r\n    try {\r\n      await sessionsApi.create({\r\n        routineId: routineId!,                // id da rotina\r\n        routineName: routine.name,            // <-- AQUI é o que estava faltando\r\n        startedAt: new Date(sessionStartTimestamp), // ou .toISOString(), dependendo da API\r\n        finishedAt: new Date(),               // agora\r\n        exercises: sessionExercises.map(se => ({\r\n          exerciseId: se.exerciseId,\r\n          category: se.category,\r\n          position: se.position,\r\n          sets: se.sets.map((s, idx) => ({\r\n            setIndex: idx,\r\n            reps: s.reps ?? null,\r\n            weightKg: s.weightKg ?? null,\r\n            durationSec: s.durationSec ?? null,\r\n            distanceM: s.distanceM ?? null,\r\n          })),\r\n        })),\r\n      })\r\n\r\n      router.push(\"/historico\")\r\n    } catch (err) {\r\n      console.error(err)\r\n      alert(\"Erro ao salvar sessão.\")\r\n    } finally {\r\n      setSaving(false)\r\n    }\r\n  }\r\n\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex justify-center items-center min-h-[70vh]\">\r\n        <Loader2 className=\"w-8 h-8 animate-spin\" />\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"p-6 max-w-3xl mx-auto flex flex-col gap-6\">\r\n      <h1 className=\"text-2xl font-bold\">{routine.name}</h1>\r\n\r\n      {routine.exercises.map((ex: any, idx: number) => (\r\n        <div key={ex.id} className=\"rounded-lg border p-4 bg-card\">\r\n          <h2 className=\"font-semibold\">{ex.name}</h2>\r\n\r\n          <Button\r\n            onClick={() => {\r\n              const next = [...sets]\r\n              next[idx].sets.push({ id: crypto.randomUUID(), reps: 10 })\r\n              setSets(next)\r\n            }}\r\n            className=\"mt-3\"\r\n          >\r\n            + Registrar set\r\n          </Button>\r\n\r\n          <div className=\"mt-3 flex flex-col gap-2\">\r\n            {sets[idx].sets.map((s: any, i: number) => (\r\n              <div key={s.id} className=\"border rounded-md p-2 flex justify-between\">\r\n                <span>Set {i + 1}</span>\r\n                <span>10 reps</span>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      ))}\r\n\r\n      <Button\r\n        className=\"bg-green-600 hover:bg-green-700 mt-6\"\r\n        onClick={finalizarTreino}\r\n      >\r\n        Finalizar treino\r\n      </Button>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAPA;;;;;;;AASe,SAAS;;IACtB,MAAM,SAAS,IAAA,wJAAe;IAC9B,MAAM,SAAS,IAAA,kJAAS;IAExB,MAAM,YAAY,OAAO,GAAG,CAAC;IAE7B,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IACvC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAM;IAC5C,MAAM,CAAC,UAAU,GAAG,IAAA,yKAAQ,EAAC,IAAI;IAEjC,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAQ,EAAE,EAAE,uCAAuC;;IAEnF,IAAA,0KAAS;iCAAC;YACR,eAAe;gBACb,IAAI,CAAC,WAAW;gBAChB,MAAM,IAAI,MAAM,wIAAW,CAAC,OAAO,CAAC;gBACpC,WAAW;gBAEX,QACE,EAAE,SAAS,CAAC,GAAG;kDAAC,CAAC,KAAY,CAAC;4BAC5B,YAAY,GAAG,UAAU;4BACzB,UAAU,GAAG,QAAQ;4BACrB,MAAM,EAAE;wBACV,CAAC;;gBAGH,WAAW;YACb;YAEA;QACF;gCAAG,EAAE;IAEL,eAAe;QACb,IAAI,CAAC,SAAS;YACZ,MAAM;YACN;QACF;QAEA,UAAU;QAEV,IAAI;YACF,MAAM,uIAAW,CAAC,MAAM,CAAC;gBACvB,WAAW;gBACX,aAAa,QAAQ,IAAI;gBACzB,WAAW,IAAI,KAAK;gBACpB,YAAY,IAAI;gBAChB,WAAW,iBAAiB,GAAG,CAAC,CAAA,KAAM,CAAC;wBACrC,YAAY,GAAG,UAAU;wBACzB,UAAU,GAAG,QAAQ;wBACrB,UAAU,GAAG,QAAQ;wBACrB,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,MAAQ,CAAC;gCAC7B,UAAU;gCACV,MAAM,EAAE,IAAI,IAAI;gCAChB,UAAU,EAAE,QAAQ,IAAI;gCACxB,aAAa,EAAE,WAAW,IAAI;gCAC9B,WAAW,EAAE,SAAS,IAAI;4BAC5B,CAAC;oBACH,CAAC;YACH;YAEA,OAAO,IAAI,CAAC;QACd,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC;YACd,MAAM;QACR,SAAU;YACR,UAAU;QACZ;IACF;IAGA,IAAI,SAAS;QACX,qBACE,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC,+NAAO;gBAAC,WAAU;;;;;;;;;;;IAGzB;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAG,WAAU;0BAAsB,QAAQ,IAAI;;;;;;YAE/C,QAAQ,SAAS,CAAC,GAAG,CAAC,CAAC,IAAS,oBAC/B,6LAAC;oBAAgB,WAAU;;sCACzB,6LAAC;4BAAG,WAAU;sCAAiB,GAAG,IAAI;;;;;;sCAEtC,6LAAC,wIAAM;4BACL,SAAS;gCACP,MAAM,OAAO;uCAAI;iCAAK;gCACtB,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC;oCAAE,IAAI,OAAO,UAAU;oCAAI,MAAM;gCAAG;gCACxD,QAAQ;4BACV;4BACA,WAAU;sCACX;;;;;;sCAID,6LAAC;4BAAI,WAAU;sCACZ,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,GAAQ,kBAC3B,6LAAC;oCAAe,WAAU;;sDACxB,6LAAC;;gDAAK;gDAAK,IAAI;;;;;;;sDACf,6LAAC;sDAAK;;;;;;;mCAFE,EAAE,EAAE;;;;;;;;;;;mBAhBV,GAAG,EAAE;;;;;0BAyBjB,6LAAC,wIAAM;gBACL,WAAU;gBACV,SAAS;0BACV;;;;;;;;;;;;AAKP;GApHwB;;QACP,wJAAe;QACf,kJAAS;;;KAFF"}}]
}